<!DOCTYPE html>
<html>
<head>
  <title>Intruder Snapshots</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
  <h1>Intruder Alarm Snapshots</h1>
  <div id="snapshot-gallery" style="display: flex; flex-wrap: wrap; gap: 16px"></div>
  <script>
    // TODO: Replace with your Firebase config!
    var firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://fiot-aa4f5-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "fiot-aa4f5",
      storageBucket: "fiot-aa4f5.appspot.com",
      messagingSenderId: "YOUR_MESSAGING_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);

    var dbRef = firebase.database().ref('snapshots');
    dbRef.on('value', function(snapshot) {
      var galleryDiv = document.getElementById('snapshot-gallery');
      galleryDiv.innerHTML = "";
      var images = [];
      snapshot.forEach(function(child) {
        images.push(child.val());
      });
      images.sort((a, b) => (b.timestamp > a.timestamp ? 1 : -1));
      images.forEach(function(imgData) {
        var card = document.createElement('div');
        card.className = 'snapshot-card';
        card.style = 'border:1px solid #ccc;background:#f8f8f8;padding:8px;border-radius:8px;width:250px;';
        var img = document.createElement('img');
        img.src = imgData.url;
        img.alt = 'Snapshot';
        img.style = 'width:100%;border-radius:6px;';
        var ts = document.createElement('div');
        ts.className = 'timestamp';
        ts.textContent = imgData.timestamp;
        card.appendChild(img);
        card.appendChild(ts);
        galleryDiv.appendChild(card);
      });
    });
  </script>
</body>
</html>